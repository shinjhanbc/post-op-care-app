<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>手術護理小幫手 - 心湛美學診所</title>
    <!-- 網站圖示 (Favicon) -->
    <link rel="icon" href="https://www.shin-jhan.com/wp-content/uploads/2025/07/心湛美學_彩色logo檔案_ol-01.jpg" type="image/jpeg">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        nude: {
                            50: '#F9F8F6',
                            100: '#F2F0EB',
                            200: '#E6E2DB',
                            300: '#D4CFC5',
                            800: '#5C5552',
                            900: '#433E3C',
                        },
                        morandi: {
                            blue: '#7A8F9F',       /* 莫蘭迪灰藍 (眼袋) */
                            blueLight: '#E8EFF5',
                            rose: '#C59D9D',       /* 乾燥玫瑰 (天鵝頸/前額) */
                            roseLight: '#F7EBEB',
                            green: '#94A396',      /* 鼠尾草綠 (雙眼皮) */
                            greenLight: '#F0F5F1',
                            purple: '#A394A3',     /* 柔和紫 (隆鼻) */
                            purpleLight: '#F5F1F5',
                            yellow: '#D9C7A6',     /* 淺米黃 (隆乳) */
                            yellowLight: '#FFFBEF',
                            orange: '#D48F7A',     /* 赤陶橘 (抽脂/補脂) */
                            orangeLight: '#F7EFE9',
                            gray: '#A8A29E',       /* 暖灰 */
                        },
                        line: {
                            green: '#06C755',      /* LINE 官方綠色 */
                            hover: '#05b64d',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #F2F0EB; /* Nude-100 */
            color: #433E3C; /* Nude-900 */
            font-size: 18px; /* 基礎字體加大 */
        }
        
        /* 自定義藥丸樣式 */
        .pill-capsule-green-white {
            background: linear-gradient(90deg, #5D8F76 50%, #F5F5F5 50%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .pill-capsule-yellow-red {
            background: linear-gradient(90deg, #E6C25B 50%, #D66A6A 50%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .pill-tablet-yellow {
            background-color: #F3E8A6;
            box-shadow: inset 0 -2px 4px rgba(0,0,0,0.05);
        }
        .pill-tablet-pink {
            background-color: #F0C4D3;
            box-shadow: inset 0 -2px 4px rgba(0,0,0,0.05);
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Icons ---
        const Icons = {
            Clock: ({className}) => <i data-lucide="clock" className={className || "w-6 h-6"}></i>,
            Calendar: ({className}) => <i data-lucide="calendar" className={className || "w-6 h-6"}></i>,
            AlertCircle: ({className}) => <i data-lucide="alert-circle" className={className || "w-6 h-6"}></i>,
            Pill: ({className}) => <i data-lucide="pill" className={className || "w-6 h-6"}></i>,
            Thermometer: ({className}) => <i data-lucide="thermometer" className={className || "w-6 h-6"}></i>,
            Droplets: ({className}) => <i data-lucide="droplets" className={className || "w-6 h-6"}></i>,
            Shield: ({className}) => <i data-lucide="shield" className={className || "w-6 h-6"}></i>,
            ChevronDown: ({className}) => <i data-lucide="chevron-down" className={className || "w-6 h-6"}></i>,
            ChevronUp: ({className}) => <i data-lucide="chevron-up" className={className || "w-6 h-6"}></i>,
            Sparkles: ({className}) => <i data-lucide="sparkles" className={className || "w-6 h-6"}></i>,
            Heart: ({className}) => <i data-lucide="heart-handshake" className={className || "w-6 h-6"}></i>,
            Zap: ({className}) => <i data-lucide="zap" className={className || "w-6 h-6"}></i>, 
            Smile: ({className}) => <i data-lucide="smile" className={className || "w-6 h-6"}></i>, 
            Feather: ({className}) => <i data-lucide="feather" className={className || "w-6 h-6"}></i>, 
            HandHeart: ({className}) => <i data-lucide="hand-heart" className={className || "w-6 h-6"}></i>, 
            CheckCircle: ({className}) => <i data-lucide="check-circle" className={className || "w-6 h-6"}></i>,
            Scissors: ({className}) => <i data-lucide="scissors" className={className || "w-6 h-6"}></i>,
            // 術前提醒 Icons
            Ban: ({className}) => <i data-lucide="ban" className={className || "w-5 h-5"}></i>,
            ShowerHead: ({className}) => <i data-lucide="shower-head" className={className || "w-5 h-5"}></i>,
            Shirt: ({className}) => <i data-lucide="shirt" className={className || "w-5 h-5"}></i>,
            AlertTriangle: ({className}) => <i data-lucide="alert-triangle" className={className || "w-5 h-5"}></i>,
            Glasses: ({className}) => <i data-lucide="glasses" className={className || "w-5 h-5"}></i>,
            Car: ({className}) => <i data-lucide="car" className={className || "w-5 h-5"}></i>,

            // LINE Icon (Custom SVG)
            Line: ({className}) => (
                <svg className={className} viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.16 9.36C21.16 4.76 16.48 1 10.58 1C4.68 1 0 4.76 0 9.36C0 12.96 2.37 15.82 5.58 17.07C6.19 17.3 6.36 17.51 6.3 18.06C6.27 18.28 6.13 19.34 6.09 19.66C6.09 19.66 5.92 20.69 6.54 20.89C7.16 21.09 8.79 20.02 10.87 18.57C14.89 18.57 21.16 14.77 21.16 9.36Z" fill="white"/>
                </svg>
            )
        };

        // --- Data ---
        const commonMedications = [
            { id: 'anti-inflammatory', name: '消炎藥 (抗生素)', desc: '預防傷口感染，務必吃完療程。', type: 'capsule-green-white', schedule: '5天份', frequency: '三餐飯後', important: true },
            { id: 'stomach', name: '胃藥', desc: '保護腸胃，減少藥物刺激。', type: 'tablet-pink', schedule: '5天份', frequency: '三餐飯後', important: true },
            { id: 'painkiller', name: '止痛藥', desc: '舒緩疼痛，不痛可不吃。', type: 'tablet-yellow', schedule: '5天份', frequency: '三餐飯後', important: false },
            { id: 'hemostatic', name: '止血消腫藥', desc: '幫助止血與消腫，只需吃前兩天，務必吃完。', type: 'capsule-yellow-red', schedule: '前2天', frequency: '三餐飯後', important: true }
        ];

        // 術前須知 (含 Icon)
        const commonPreOp = [
            { text: '手術前一週停用保健食品 (銀杏、人蔘、魚油、維他命E、活通血路藥物等)。', icon: Icons.Ban },
            { text: '手術前一晚請徹底清潔、洗頭洗澡，當日不需帶換洗衣物。', icon: Icons.ShowerHead },
            { text: '手術當日請全素顏、勿擦保養品 (霜、乳、油類不可)。', icon: Icons.Sparkles },
            { text: '請穿著寬鬆好穿脫衣物，勿穿高跟鞋。', icon: Icons.Shirt },
            { text: '請勿攜帶貴重物品。', icon: Icons.AlertTriangle },
            { text: '建議不要戴隱形眼鏡 (若近視可戴一般眼鏡)。', icon: Icons.Glasses },
            { text: '請勿自行開車/騎車，建議搭乘大眾運輸或親友接送。', icon: Icons.Car }
        ];

        // --- 分頁專屬資料 (傷口護理) ---
        const specificContent = {
            eyebag: {
                title: '眼袋手術',
                icon: Icons.Droplets,
                colorTheme: 'blue',
                woundCare: {
                    steps: [
                        '傷口已貼美容膠與膚色膠帶固定加壓。',
                        '若對膠帶過敏(癢、不舒服)，請將膠帶與美容膠撕除。',
                        '若膠帶撕除導致傷口暴露，需進行清潔換藥。',
                        '清潔方式：棉棒沾生理食鹽水，輕輕滾過傷口 (單一方向，不可來回)。',
                        '清潔後用乾棉棒擦乾，塗抹薄薄一層藥膏。',
                        '換藥頻率：早晚各一次 (髒掉或濕掉隨時加強)。'
                    ],
                    medsNote: '若眼睛乾澀、紅癢，可使用提供的眼藥水，一日 2-3 次，每次 1-2 滴。'
                },
                iceCare: {
                    instruction: '術後一週內需勤勞冰敷。',
                    method: '冰敷袋冷凍後使用，務必隔著乾淨紗布或毛巾，不可直接接觸皮膚。',
                    position: '冰敷於患部區域，坐著休息為佳。'
                },
                followUp: {
                    sutureRemoval: {
                        time: '術後 7 天 (拆線/恢復觀察)',
                        instructions: [
                            '冰敷：術後前三天加強冰敷，以減輕腫脹和瘀青。',
                            '傷口照護：使用生理食鹽水清潔，並塗上藥膏保持乾淨乾燥。',
                            '避免動作：禁止提重物、劇烈運動、彎腰低頭、揉眼睛。',
                            '飲食：避免辛辣、刺激性食物，並暫時避免抽菸、飲酒。',
                            '睡姿：睡覺時墊高枕頭，幫助血液回流。',
                            '化妝：拆線前避免上妝，術後約一週後才可正常洗臉、擦隔離霜。'
                        ]
                    },
                    oneMonth: {
                        time: '術後 1 個月',
                        instructions: [
                            '運動：避免激烈運動，如重訓、游泳、水上活動。',
                            '飲食：避免飲酒及刺激性食物。',
                            '化妝與隱形眼鏡：可正常洗臉，但避免上眼妝、戴隱形眼鏡或接睫毛。',
                            '生活：避免長時間用眼，可適當使用人工淚液，外出建議戴太陽眼鏡。',
                            '按摩：部分恢復情況下，醫師會建議輕柔按摩，但需避免拉扯皮膚。'
                        ]
                    },
                    threeMonth: {
                        time: '術後 3 個月',
                        instructions: [
                            '防曬：避免長時間日曬，外出建議配戴太陽眼鏡。',
                            '避免溫熱：避免泡澡、泡溫泉等會使臉部變紅的行為。',
                            '按摩：依醫囑進行輕柔按摩，促進血液循環。',
                            '保濕：適當保濕，並避免用力拉扯眼周肌膚。',
                            '其他：若有明顯的不對稱或腫脹情況，需耐心等待疤痕穩定後逐漸改善。'
                        ]
                    },
                }
            },
            doubleEyelid: {
                title: '雙眼皮手術',
                icon: Icons.Smile,
                colorTheme: 'green',
                woundCare: {
                    steps: [
                        '傷口若有血塊或分泌物，用生理食鹽水濕敷軟化後再輕輕擦拭。',
                        '清潔方式：棉棒沾生理食鹽水，輕輕滾過傷口 (單一方向，不可來回)。',
                        '清潔後用乾棉棒擦乾，塗抹薄薄一層藥膏。',
                        '換藥頻率：早晚各一次 (髒掉或濕掉隨時加強)。',
                        '注意事項：術後勿揉眼睛，避免傷口裂開或影響癒合。'
                    ],
                    medsNote: '若眼睛乾澀、紅癢，可使用提供的眼藥水，一日 2-3 次，每次 1-2 滴。'
                },
                iceCare: {
                    instruction: '術後前三天需勤勞冰敷，有助於消腫。',
                    method: '冰敷袋需隔紗布/毛巾，不可直接接觸皮膚。',
                    position: '冰敷於眼皮與眼周區域，坐著休息為佳。'
                },
                followUp: {
                    sutureRemoval: {
                        time: '術後 7 天 (拆線)',
                        instructions: [
                            '冰敷：每次約15分鐘，一天至少5次。',
                            '傷口照護：每天清潔傷口並擦藥膏。避免碰生水。',
                            '清潔：避免洗面乳，若碰到清潔劑應立刻沖洗。',
                            '飲食：禁菸酒、辛辣、刺激性食物。',
                            '活動：避免劇烈運動、提重物、彎腰、哭泣或揉眼睛。',
                            '拆線：拆線後，傷口不可用力搓揉。'
                        ]
                    },
                    oneMonth: {
                        time: '術後 1 個月',
                        instructions: [
                            '溫敷：術後三天後可改為溫敷，促進血液循環。',
                            '眼部運動：多做睜眼運動，幫助摺痕定型。',
                            '活動：避免激烈運動，睡前避免攝取過多水分。',
                            '飲食：仍需避免抽菸、喝酒及過於刺激的食物。',
                            '其他：建議配戴太陽眼鏡。約兩週後可戴隱形眼鏡。避免在傷口處化妝。'
                        ]
                    },
                    threeMonth: {
                        time: '術後 3 個月',
                        instructions: [
                            '穩定恢復：傷口腫脹、瘀青應已大致消除。',
                            '回診追蹤：依醫師指示進行回診。',
                            '持續護理：保持良好生活習慣，避免過度揉眼睛。',
                            '化妝與保養：傷口完全恢復後，可慢慢恢復化妝及保養品的使用。'
                        ]
                    },
                }
            },
            rhinoplasty: {
                title: '隆鼻手術',
                icon: Icons.Feather,
                colorTheme: 'purple',
                woundCare: {
                    steps: [
                        '傷口通常在鼻孔內側或鼻小柱。',
                        '清潔方式：棉棒沾生理食鹽水，清潔鼻孔內側傷口。',
                        '清潔後用乾棉棒擦乾，塗抹藥膏。',
                        '換藥頻率：早晚各一次。',
                        '注意事項：鼻孔外側的膠帶或縫線勿自行移除或碰水。'
                    ],
                    medsNote: '無特別額外藥水，請按時服用口服藥。'
                },
                iceCare: {
                    instruction: '術後一週內需冰敷。',
                    method: '使用小冰敷袋或冰眼罩，避開鼻樑植入處，冰敷於鼻翼與眼周。',
                    position: '抬高頭部，半坐臥休息。'
                },
                followUp: {
                    sutureRemoval: {
                        time: '術後 7 天 (拆線/檢查)',
                        instructions: [
                            '冰敷：可有效減緩腫脹、瘀青和疼痛。',
                            '傷口照護：按醫囑清潔傷口，並塗抹藥膏，拆線前傷口避免碰水。',
                            '飲食：避免菸、酒、咖啡、茶、辣椒等刺激性食物，以利傷口癒合。',
                            '活動：避免彎腰、提重物等會增加頭部壓力的動作。'
                        ]
                    },
                    oneMonth: {
                        time: '術後 1 個月',
                        instructions: [
                            '消腫：可將冰敷改為溫熱敷，促進血液循環幫助消腫。',
                            '活動：可開始做一般輕微運動，但仍需避免劇烈運動，以免傷口位移。',
                            '眼鏡：至少術後兩週到一個月內應避免戴普通眼鏡，以免壓迫鼻樑，可暫時改戴隱形眼鏡。',
                            '飲食：持續避免刺激性食物。',
                            '其他：避免用力擤鼻涕或挖鼻孔。'
                        ]
                    },
                    threeMonth: {
                        time: '術後 3 個月',
                        instructions: [
                            '活動：繼續避免激烈運動和鼻子受到嚴重碰撞或壓迫。',
                            '飲食：原則上不受限制，但建議持續清淡飲食。',
                            '穩定期：此時鼻部結構相對穩定，可以開始適度地進行一些日常活動，但仍需小心保護。',
                            '追蹤：仍需按時回診，讓醫師評估恢復狀況。'
                        ]
                    },
                }
            },
            neck: {
                title: '天鵝頸手術',
                icon: Icons.Zap,
                colorTheme: 'rose',
                woundCare: {
                    steps: [
                        '傷口有加壓固定膠帶。',
                        '若皮膚發癢過敏，請撕除膠帶與美容膠。',
                        '傷口暴露時需換藥：棉棒沾食鹽水滾動清潔 (單一方向)。',
                        '等待乾燥或擦乾後，塗抹藥膏。',
                        '換藥頻率：早晚各一次。'
                    ],
                    medsNote: '無特別額外藥水，請按時服用口服藥。'
                },
                iceCare: {
                    instruction: '術後一週皆需冰敷，消腫較快。',
                    method: '冰敷袋需隔紗布/毛巾。',
                    position: '找有靠背沙發，雙手拿冰敷袋冰敷「輪廓線」與「頸部」。'
                },
                followUp: {
                    sutureRemoval: {
                        time: '術後 7 天 (視恢復情況而定)',
                        instructions: [
                            '冰敷與頭套：術後72小時內加強冰敷。本診所無須佩戴頭套。',
                            '傷口照護：拆線後隔天可正常使用清潔用品。美容膠持續張貼傷口，3-4天替換。',
                            '飲食：術後一週內避免生冷、辛辣、刺激性食物及帶殼海鮮。',
                            '活動：應盡量休息，減少頸部轉動、低頭抬頭。'
                        ]
                    },
                    oneMonth: {
                        time: '術後 1 個月',
                        instructions: [
                            '外觀：下巴少數人仍會有類似凹凸狀況，屬正常現象，通常三個月後恢復。',
                            '消腫：約可恢復七至八成。若有少量瘀青可溫敷（避開補脂區）。',
                            '活動：避免劇烈運動、搬重物、過度勞累或長時間低頭。',
                            '飲食：仍需避免抽菸、飲酒及刺激性食物。',
                            '按摩：術後約兩週後，可在醫師指導下進行居家按摩。',
                            '洗澡：避免泡澡、浸泡溫泉。'
                        ]
                    },
                    threeMonth: {
                        time: '術後 3 個月',
                        instructions: [
                            '活動：避免用力的拉扯手術部位，循序漸進恢復活動。',
                            '恢復期：完全消腫及組織定型約需三到六個月。',
                            '生活習慣：維持正常生活作息，避免體重劇烈起伏。'
                        ]
                    },
                }
            },
            foreheadLift: {
                title: '前額拉皮',
                icon: Icons.Zap,
                colorTheme: 'rose',
                woundCare: {
                    steps: [
                        '傷口位於髮際線或頭皮內，通常以縫線或釘書針固定。',
                        '保持傷口乾燥，避免碰水。若有滲液，可輕輕用紗布按壓吸乾。',
                        '拆線/釘書針前，請勿自行移除敷料。',
                        '清潔方式：回診時由護理師處理，請保持清潔。'
                    ],
                    medsNote: '術後需穿戴頭部或額頭彈性繃帶，依醫囑每日穿戴 20-24 小時。'
                },
                iceCare: {
                    instruction: '術後前三天需勤勞冰敷。',
                    method: '冰敷袋需隔著乾淨紗布或毛巾，避開植髮區或釘書針處。',
                    position: '冰敷於額頭和顳部（太陽穴）周圍。'
                },
                followUp: {
                    sutureRemoval: {
                        time: '術後 7 天 (拆釘書針/縫線)',
                        instructions: [
                            '傷口護理：保持乾燥，可開始輕柔洗頭。',
                            '冰敷：術後前三天冰敷，每次約15分鐘。',
                            '飲食：避免辛辣、刺激性食物。',
                            '運動：禁止劇烈運動，可適度抬高頭部睡覺。'
                        ]
                    },
                    oneMonth: {
                        time: '術後 1 個月',
                        instructions: [
                            '飲食：繼續避免抽菸、飲酒及刺激性食物。',
                            '運動：仍需避免劇烈運動、泡溫泉、三溫暖。',
                            '疤痕照護：可開始依醫師指示進行按摩和使用除疤藥物。',
                            '回診：部分情況下需回診追蹤。'
                        ]
                    },
                    threeMonth: {
                        time: '術後 3 個月',
                        instructions: [
                            '染燙髮：避免染髮或燙髮。',
                            '疤痕照護：持續按摩疤痕，或使用美容膠帶。',
                            '追蹤：按時回診追蹤。',
                            '神經恢復：若有麻木感，可長期服用維他命B12。'
                        ]
                    },
                }
            },
            breastAugmentation: {
                title: '隆乳手術',
                icon: Icons.HandHeart,
                colorTheme: 'yellow',
                woundCare: {
                    steps: [
                        '傷口通常在腋下、乳暈或下緣，已貼防水敷料或美容膠。',
                        '術後 7 天內傷口不可碰水，保持乾燥。',
                        '若敷料脫落或破損，需聯繫診所更換。',
                        '換藥頻率：由診所指定，通常是回診時更換，不需自行處理。'
                    ],
                    medsNote: '術後三個月需依醫囑按摩胸部，請遵照醫護人員指示。'
                },
                iceCare: {
                    instruction: '術後前三天需冰敷。',
                    method: '避開乳房本體，冰敷於胸部外側或腋下傷口周圍。',
                    position: '穿著束胸帶或彈性內衣，背部墊2-3顆枕頭半坐臥方式休息。' 
                },
                followUp: {
                    sutureRemoval: {
                        time: '術後 7 天 (拆線/檢查)',
                        instructions: [
                            '傷口照護：保持清潔乾燥，避免碰水和泡澡。',
                            '活動限制：避免提重物、劇烈運動和手臂過度伸展。',
                            '飲食：避免辛辣、刺激或活血性食物。',
                            '冰敷：可於兩側乳房下緣冰敷，幫助止血止痛。',
                            '內衣：依醫師指示，24小時穿著束胸帶。'
                        ]
                    },
                    oneMonth: {
                        time: '術後 1 個月',
                        instructions: [
                            '運動：可恢復部分日常工作，避免劇烈運動。',
                            '內衣：持續依醫師指示穿著束胸帶。',
                            '疤痕照護：拆線後可開始使用除疤凝膠。'
                        ]
                    },
                    threeMonth: {
                        time: '術後 3 個月',
                        instructions: [
                            '活動：可開始低強度運動，仍需避免劇烈運動。',
                            '按摩：持續保持按摩習慣。',
                            '疤痕照護：持續使用除疤產品。',
                            '內衣：可穿著軟性有支撐性內衣，避免集中托高或有襯墊。',
                            '飲食：可恢復正常飲食。'
                        ]
                    },
                }
            },
            liposuction: {
                title: '抽脂手術',
                icon: Icons.Zap,
                colorTheme: 'orange',
                woundCare: {
                    steps: [
                        '傷口小且隱藏，已貼上人工皮或防水敷料。',
                        '傷口處會有滲液流出，為正常現象，敷料濕透需更換。',
                        '清潔方式：撕除敷料後，用食鹽水清潔傷口，塗抹藥膏後再貼上新的敷料。',
                        '換藥頻率：依滲液多寡隨時更換，至少一天一次。'
                    ],
                    medsNote: '請務必 24 小時穿著塑身衣，僅洗澡時可脫下。'
                },
                iceCare: {
                    instruction: '冰敷有助於舒緩腫脹和疼痛，前 3 天可多做。',
                    method: '冰敷袋需隔著束衣或毛巾，不可直接接觸皮膚。',
                    position: '冰敷於抽脂部位，多休息，避免壓迫患部。'
                },
                followUp: {
                    sutureRemoval: {
                        time: '術後 7 天 (回診換藥)',
                        instructions: [
                            '傷口照護：保持清潔乾燥，依醫師指示換藥。',
                            '活動：避免舉重和劇烈運動，可適度伸展。',
                            '飲食：避免菸酒辛辣，多攝取高蛋白。',
                            '其他：依醫囑服藥，可冰敷（三天後改溫敷）。'
                        ]
                    },
                    oneMonth: {
                        time: '術後 1 個月',
                        instructions: [
                            '傷口照護：可依醫囑正常淋浴，避免泡澡。',
                            '塑身衣：持續穿著塑身衣。',
                            '運動：可開始中等強度運動（如游泳）。',
                            '按摩：可開始輕柔按摩抽脂部位。',
                            '飲食：可適量攝取消腫食物。'
                        ]
                    },
                    threeMonth: {
                        time: '術後 3 個月',
                        instructions: [
                            '塑身衣：持續穿著，至少穿滿三個月。',
                            '運動：可逐漸恢復劇烈運動。',
                            '按摩：持續按摩，特別是凹凸不平處。',
                            '體重管理：維持體重以保持效果。',
                            '注意事項：皮膚麻木感、腫脹或瘀青會逐漸恢復。'
                        ]
                    },
                }
            },
            fullFaceFatGrafting: {
                title: '全臉補脂',
                icon: Icons.Feather,
                colorTheme: 'orange',
                woundCare: {
                    steps: [
                        '補脂部位針孔微小，已貼上人工皮或美容膠。',
                        '抽脂供區傷口（如大腿、腹部）需按抽脂護理方式清潔換藥。',
                        '補脂部位僅需保持乾燥，勿按摩或用力按壓。',
                        '換藥頻率：針孔處若有髒汙，一天清潔一次即可。'
                    ],
                    medsNote: '補脂部位禁止冰敷或熱敷，避免影響脂肪存活率。'
                },
                iceCare: {
                    instruction: '補脂區禁止冰敷/熱敷；供脂區 (如大腿/腹部) 可冰敷。',
                    method: '供脂區冰敷袋需隔著衣服或毛巾。補脂區保持溫和。',
                    position: '休息時頭部抬高，補脂區維持輕柔。'
                },
                followUp: {
                    sutureRemoval: {
                        time: '術後 7 天 (回診)',
                        instructions: [
                            '傷口照護：保持清潔乾燥，依醫囑貼人工皮。',
                            '飲食：流質或半流質飲食，避免辛辣。',
                            '活動：避免劇烈運動、提重物，兩週內避免用力咀嚼。',
                            '注意事項：取脂處腫脹瘀青屬正常現象。'
                        ]
                    },
                    oneMonth: {
                        time: '術後 1 個月',
                        instructions: [
                            '活動與按摩：避免用力按摩、揉捏補脂部位；不可趴睡。',
                            '洗浴：避免泡熱水澡、三溫暖。',
                            '運動：避免劇烈運動。',
                            '飲食：持續避免刺激物。'
                        ]
                    },
                    threeMonth: {
                        time: '術後 3 個月',
                        instructions: [
                            '體重管理：保持體重穩定。',
                            '生活習慣：避免熬夜、抽菸。',
                            '其他：補脂部位仍應避免用力按壓。',
                            '追蹤：如有異常應盡速回診。'
                        ]
                    },
                }
            }
        };

        const surgeryKeys = Object.keys(specificContent);

        // --- Helper Function for Colors ---
        const getColorClasses = (colorName) => ({
            bg: `bg-morandi-${colorName}`, 
            text: `text-morandi-${colorName}`, 
            lightBg: `bg-morandi-${colorName}Light`,
            pill: `bg-morandi-${colorName} text-white`
        });

        // --- Components ---
        const PillVisual = ({ type }) => {
            let className = "w-10 h-5 inline-block mr-4 flex-shrink-0 ";
            if (type === 'capsule-green-white') className += "rounded-full pill-capsule-green-white";
            if (type === 'capsule-yellow-red') className += "rounded-full pill-capsule-yellow-red";
            if (type === 'tablet-yellow') className += "rounded-[40%] pill-tablet-yellow border border-yellow-200/50";
            if (type === 'tablet-pink') className += "rounded-full pill-tablet-pink border border-pink-200/50 w-5 h-5 mx-2"; 
            return <div className={className}></div>;
        };

        const IceTimer = ({ activeTab }) => {
            const [timeLeft, setTimeLeft] = useState(15 * 60); 
            const [isActive, setIsActive] = useState(false);
            const [mode, setMode] = useState('ice');
            const colorName = specificContent[activeTab].colorTheme;
            const btnColor = `bg-morandi-${colorName} text-white`;
            const ringColor = `text-morandi-${colorName}`;

            useEffect(() => {
                let interval = null;
                if (isActive && timeLeft > 0) {
                    interval = setInterval(() => { setTimeLeft(timeLeft - 1); }, 1000);
                } else if (timeLeft === 0) {
                    setIsActive(false);
                    if(mode === 'ice') { setMode('rest'); setTimeLeft(60 * 60); } 
                    else { setMode('ice'); setTimeLeft(15 * 60); }
                }
                return () => clearInterval(interval);
            }, [isActive, timeLeft, mode]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            };

            return (
                <div className="bg-nude-50 rounded-3xl p-6 shadow-sm border border-nude-200 mt-6 text-center">
                    <h3 className="text-xl font-bold text-nude-800 flex items-center justify-center gap-2 mb-2 tracking-wide">
                        <Icons.Clock className="text-nude-800 opacity-70 w-6 h-6"/> {mode === 'ice' ? '冰敷計時' : '休息時間'}
                    </h3>
                    <div className={`text-7xl font-light font-mono my-6 ${ringColor}`}>{formatTime(timeLeft)}</div>
                    <div className="flex justify-center gap-4">
                        <button onClick={() => setIsActive(!isActive)} className={`px-8 py-3 rounded-full text-xl font-medium transition-all shadow-md active:scale-95 ${isActive ? 'bg-nude-300 text-nude-800' : btnColor}`}>{isActive ? '暫停' : '開始'}</button>
                        <button onClick={() => { setIsActive(false); setMode('ice'); setTimeLeft(15*60); }} className="px-6 py-3 rounded-full text-xl font-medium text-nude-800 bg-white border border-nude-200 hover:bg-nude-50 transition-all">重置</button>
                    </div>
                </div>
            );
        };

        const FollowUpSchedule = ({ data, activeTab }) => {
            const colorName = specificContent[activeTab].colorTheme;
            const classes = getColorClasses(colorName);
            
            const scheduleItems = [
                { title: '拆線/拆釘書針', data: data.sutureRemoval, icon: Icons.Scissors, color: 'text-red-500' },
                { title: '術後 1 個月回診', data: data.oneMonth, icon: Icons.CheckCircle, color: classes.text },
                { title: '術後 3 個月回診', data: data.threeMonth, icon: Icons.CheckCircle, color: classes.text },
            ];

            return (
                <div className="bg-white rounded-3xl p-6 shadow-lg border border-nude-100 mt-8">
                    <div className="flex items-center gap-4 mb-6">
                        <div className={`p-4 rounded-xl ${classes.lightBg} ${classes.text}`}>
                            <Icons.Calendar className="w-7 h-7"/>
                        </div>
                        <h4 className="text-2xl font-bold text-nude-900">回診與拆線時間</h4>
                    </div>
                    <div className="space-y-6">
                        {scheduleItems.map((item, i) => (
                            <div key={i} className="flex gap-4 p-5 bg-nude-50 rounded-xl shadow-sm border border-nude-200">
                                <div className={`flex-shrink-0 mt-1 ${item.color}`}>
                                    {item.icon({className: 'w-6 h-6'})}
                                </div>
                                <div className="flex-1">
                                    <p className="text-lg font-bold text-nude-900 mb-1">{item.title}</p>
                                    <p className="text-xl font-medium text-nude-800 mb-2">
                                        {item.data.time || item.data} 
                                    </p>
                                    {item.data.instructions && item.data.instructions.length > 0 && (
                                        <ul className="list-none space-y-2 mt-3 pt-3 border-t border-nude-200">
                                            {item.data.instructions.map((inst, idx) => (
                                                <li key={idx} className="flex items-start gap-2 text-base text-nude-700 font-light">
                                                    <span className={`mt-2 min-w-[5px] h-[5px] rounded-full ${classes.bg}`}></span>
                                                    <span className="leading-relaxed">{inst}</span>
                                                </li>
                                            ))}
                                        </ul>
                                    )}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const CommonAccordionItem = ({ title, icon, children, isOpen, onClick }) => (
            <div className="border-b border-nude-200 last:border-0">
                <button className="w-full py-6 px-6 flex items-center justify-between bg-white hover:bg-nude-50 transition-all duration-300 text-left" onClick={onClick}>
                    <div className="flex items-center gap-5"><span className={`p-3 rounded-xl transition-colors duration-300 ${isOpen ? 'bg-nude-200 text-nude-900' : 'bg-nude-100 text-nude-800'}`}>{icon}</span><span className={`text-xl font-medium tracking-wide transition-colors ${isOpen ? 'text-nude-900' : 'text-nude-800'}`}>{title}</span></div>
                    <span className={`transform transition-transform duration-300 ${isOpen ? 'rotate-180 text-nude-800' : 'text-nude-300'}`}><Icons.ChevronDown className="w-6 h-6"/></span>
                </button>
                <div className={`overflow-hidden transition-all duration-500 ease-in-out ${isOpen ? 'max-h-[2000px] opacity-100' : 'max-h-0 opacity-0'}`}><div className="p-6 pt-2 text-nude-800 leading-relaxed bg-white">{children}</div></div>
            </div>
        );

        const App = () => {
            const [activeTab, setActiveTab] = useState('eyebag');
            const [openSections, setOpenSections] = useState({ preop: false, meds: true });
            const currentData = specificContent[activeTab];
            const woundCareText = currentData.woundCare.steps.join('。');
            const themeClasses = getColorClasses(currentData.colorTheme);
            const toggleSection = (section) => setOpenSections(prev => ({ ...prev, [section]: !prev[section] }));

            useEffect(() => { lucide.createIcons(); }, [activeTab, openSections]);

            return (
                <div className="max-w-md mx-auto min-h-screen bg-nude-100 pb-20 relative shadow-2xl overflow-hidden font-sans">
                    <div className="relative px-6 pt-12 pb-10 bg-nude-800">
                        <h2 className="text-white/80 text-lg tracking-[0.15em] mb-2 font-light">心湛美學診所</h2>
                        <h1 className="text-4xl text-white font-medium tracking-wide flex items-center gap-3"><Icons.Sparkles className="w-8 h-8"/> 術後護理小幫手</h1>
                    </div>
                    <div className="px-5 -mt-6 space-y-5 relative z-10">
                        <div className="bg-white rounded-3xl shadow-lg border border-white overflow-hidden">
                            <CommonAccordionItem title="術前小提醒" icon={<Icons.Calendar />} isOpen={openSections.preop} onClick={() => toggleSection('preop')}>
                                <ul className="space-y-4 mt-2">
                                    {commonPreOp.map((item, idx) => (
                                        <li key={idx} className="flex items-start gap-4 text-lg text-nude-800 font-light">
                                            <div className="mt-1 flex-shrink-0 text-nude-400">
                                                {item.icon({className: "w-5 h-5"})}
                                            </div>
                                            <span className="leading-relaxed">{item.text}</span>
                                        </li>
                                    ))}
                                </ul>
                            </CommonAccordionItem>
                        </div>
                        <div className="bg-white rounded-3xl shadow-lg border border-white overflow-hidden">
                            <CommonAccordionItem title="口服藥與藥品" icon={<Icons.Pill />} isOpen={openSections.meds} onClick={() => toggleSection('meds')}>
                                <div className="space-y-5">
                                    <div className="bg-nude-50 p-5 rounded-2xl border border-nude-200/50 text-nude-800"><div className="font-medium flex items-center gap-2 mb-3 text-morandi-green"><Icons.AlertCircle className="w-6 h-6" /> <span className="text-nude-900 text-xl">用藥原則</span></div><ul className="list-disc pl-6 space-y-2 text-lg font-light text-nude-800 opacity-90"><li>一天三次，三餐飯後服用。</li><li>若未正常用餐，間隔 4 小時以上。</li><li><strong className="font-medium text-nude-900">止血藥、消炎藥、胃藥務必吃完。</strong></li></ul></div>
                                    <div className="grid gap-4">{commonMedications.map(med => (<div key={med.id} className="flex items-center bg-white p-4 rounded-2xl border border-nude-200 shadow-sm"><PillVisual type={med.type} /><div className="flex-1 min-w-0"><div className="flex justify-between items-baseline mb-2"><h4 className="font-bold text-nude-900 text-xl">{med.name}</h4>{med.important && <span className="text-sm bg-morandi-rose text-white px-3 py-1 rounded-full tracking-wider font-medium">必吃</span>}</div><p className="text-base text-nude-800 opacity-80">{med.desc}</p></div></div>))}</div>
                                </div>
                            </CommonAccordionItem>
                        </div>
                    </div>
                    
                    <div className="mt-10 px-0">
                        <div className="flex items-center gap-3 mb-6 px-5"><div className="h-px bg-nude-300 flex-1"></div><span className="text-base text-nude-400 font-medium tracking-widest uppercase">選擇您的手術</span><div className="h-px bg-nude-300 flex-1"></div></div>
                        <div className="flex bg-nude-100 px-5 overflow-x-auto no-scrollbar pb-3 space-x-3">
                            {surgeryKeys.map(key => {
                                const data = specificContent[key];
                                const isSelected = activeTab === key;
                                const colorClass = getColorClasses(data.colorTheme);
                                return (<button key={key} onClick={() => setActiveTab(key)} className={`flex-shrink-0 px-5 py-4 rounded-3xl text-lg font-medium transition-all duration-300 shadow-md min-w-[120px] ${isSelected ? `${colorClass.bg} text-white shadow-xl` : 'bg-white text-nude-800 hover:bg-nude-200'}`}>{data.title}</button>);
                            })}
                        </div>
                    </div>

                    <div className="px-5 mt-4">
                        <div className={`transition-opacity duration-300 ease-in-out`}>
                            <h3 className={`text-3xl font-medium mb-6 flex items-center gap-3 ${themeClasses.text}`}><Icons.Sparkles className="w-8 h-8"/> {currentData.title}術後照護</h3>
                            <FollowUpSchedule data={currentData.followUp} activeTab={activeTab} />
                            <div className="space-y-8 mt-8">
                                <div className="bg-white rounded-3xl p-6 shadow-lg border border-nude-100">
                                    <div className="flex items-center gap-4 mb-6"><div className={`p-4 rounded-xl ${themeClasses.lightBg} ${themeClasses.text}`}><Icons.Shield className="w-7 h-7"/></div><h4 className="text-2xl font-bold text-nude-900">傷口清潔與換藥</h4></div>
                                    <div className="relative pl-8 border-l-2 border-nude-200 space-y-6 my-6">{currentData.woundCare.steps.map((step, i) => (<div key={i} className="relative"><div className={`absolute -left-[1.65rem] top-2 w-4 h-4 rounded-full border-2 border-white ring-2 ring-nude-200 ${themeClasses.bg}`}></div><p className="text-xl text-nude-800 font-light leading-9">{step}</p></div>))}</div>
                                    <div className="mt-8 bg-nude-50 p-5 rounded-2xl text-lg text-nude-800 font-light flex gap-3 items-center"><Icons.Heart className="w-6 h-6 text-nude-400 flex-shrink-0"/><span>換藥包：棉花棒、生理食鹽水、藥膏 (Tetra)</span></div>
                                    {currentData.woundCare.medsNote && (<div className={`mt-4 ${themeClasses.lightBg} p-5 rounded-2xl text-lg text-nude-800 flex gap-3 items-start`}><Icons.Droplets className={`w-6 h-6 ${themeClasses.text} flex-shrink-0 mt-1`}/><span className="leading-relaxed">{currentData.woundCare.medsNote}</span></div>)}
                                </div>
                                <div className="bg-white rounded-3xl p-6 shadow-lg border border-nude-100">
                                    <div className="flex items-center gap-4 mb-6"><div className={`p-4 rounded-xl ${themeClasses.lightBg} ${themeClasses.text}`}><Icons.Thermometer className="w-7 h-7"/></div><h4 className="text-2xl font-bold text-nude-900">術後冰敷</h4></div>
                                    <div className="text-xl text-nude-800 font-light space-y-4 mb-6"><p className="font-bold opacity-95 text-2xl mb-4">{currentData.iceCare.instruction}</p><div className="flex flex-col gap-2 bg-nude-50 p-5 rounded-xl"><span className="flex-shrink-0 text-base font-medium uppercase text-nude-400">方法</span><p className="leading-relaxed">{currentData.iceCare.method}</p></div><div className="flex flex-col gap-2 bg-nude-50 p-5 rounded-xl"><span className="flex-shrink-0 text-base font-medium uppercase text-nude-400">姿勢</span><p className="leading-relaxed">{currentData.iceCare.position}</p></div></div>
                                    <IceTimer activeTab={activeTab}/>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Footer & LINE Button */}
                    <div className="px-5 mt-12 mb-8">
                        <a href="https://lin.ee/BWzO162" target="_blank" rel="noopener noreferrer" className="block w-full">
                            <button className="w-full flex items-center justify-center gap-3 bg-[#06C755] hover:bg-[#05b64d] text-white py-4 rounded-2xl shadow-lg transition-transform active:scale-[0.98]">
                                <Icons.Line className="w-8 h-8" />
                                <span className="text-xl font-bold tracking-wide">立即詢問診所</span>
                            </button>
                        </a>
                        <p className="text-center text-nude-400 text-sm mt-4 font-light">有任何疑問？歡迎透過 LINE 官方帳號與我們聯繫</p>
                    </div>

                    <footer className="text-center text-nude-300 text-sm tracking-widest uppercase py-12 opacity-60">Design for Healing & Comfort</footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
